                        PICTUREPHONE
          Text-based video-conferencing in the terminal.

demo video: https://cdn.danielfalbo.com/picturephone.mp4

▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▄▆█████████████████████▆▄▂▂▂▂??????????????????
▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▄█████████████████▆▆▆▆█▆▆█▆▆▆▆██▆▆▆▆▆▄▄▂???????????
▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▄▆█████████████████████████████▆████▆█████████▆▂▂???????
▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▄████████████████████████▆▆▆▆▆████▆▆▆▆▆▆▆▆▆▆█████████▄▂????
▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▄███████████████████████▆▆▆▆▆▆▆███▆▆▆▆▆▆▆▆███████████████▆▂??
▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▆████████████████████▆▆▄▄▄▄▄▄▄▄▆▆▆▆▆▆▆▆▆▆▆▆▆▆▆▆▆▆▆▆█████████▆▂
▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▆█████████████████▆▆▆▆▆▄▄▂▂▂?????▂▂▂▂▄▄▄▄▆▆▆▆▆▆▆▆▆▆▆▆▆▆▆▆██████
▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▆███████████████▆▆▆▄▄▂▂▂???????????xxxxxx???▂▂▄▄▄▆▆▆▆▆▆▄▆▆▆▆███
▂▂▂▂▂▂▂▂▂▂▂▂▂▂▆████████████████▆▄▄▄▂▂▂????????x??????????xxxxxx???▂▂▄▄▄▆▆▆▄▆▆▆
▂▂▂▂▂▂▂▂▂▂▂▂▂▂█████████▆▆▆▆▆▆▆▆▄▄▂▂?????????????x???xxxxxxxx??xx?xx?????▂▄▄▆▆▆
▂▂▂▂▂▂▂▂▂▂▂▂▂▆██▆▆▆▆▆▆▆▆▆▆▄▄▄▄▄▂▂??????????????xxxxxxxxxxxxxxxxxxxxx??????▂▄▆▆
▂▂▂▂▂▂▂▂▂▂▂▂▄▆▆▆▆▆▆▄▆▆▆▄▄▄▂▂?▂??????xx?????????xxxxxxxxxxxxxxxxxx?xxxx?????▂▄▆
▂▂▂▂▂▂▂▂▂▂▂▂▄▆▆▆▄▄▄▄▄▄▄▂▂▂????????????x???xxxxxxxxx??xxxxxxxxxxxxxxxxxxxx??▂▂▆
▂▂▂▂▂▂▂▂▂▂▂▂▄▆▆▄▄▄▄▄▂▂▂▂▂?????????▂▂▂▂▂▄▄▄▆▆▆▄▄▄▂?xxxxxxxxxxxxxxxxxxxxx?????▂▄
▂▂▂▂▂▂???▂??▂▄▂▄▂▂▄▂▂▂▂?▂??????????xxxxxxxxxxx?▂▂▄▄▄▂?xxxxxxxxxxxxxxxxxxxx??▂▂
▂▂▂▂▂???▂???x??▂▂▂▂▂▂▂???????????xxxxxxxxxxxx....xx?▂▄▂?xx..xxxxxxxxxxxx?????▂
▂▂▂▂▂?▂▂???????▂▂▂▂▂▂▂??▂??????xxxxxxxxxx...........xxx?xxxx...xxxxxxxxx??????
▂▂▂▂▂▂▂?xxxx???▂▂▂▂▂▂▂????????xxxxxxxxxxx?xxxxxxxxxxx.xx.........xxxx?▄▄▆▆▆▆▆▂
▂▂▂▂▂?xxxxxx???▂▂▄▂▂▂▂???????xxxxxx??▂▂▂▂?xx?????xxxxxx..........xxxxxxxxxx▂▆▄
▂▂▂▂▂????xx?????▂▂▂▂▂▂▂▂▂???xxxxxxxx?▂▂?▆▆▄▆▄.x????xxxxx.......xxxxxxxxxxxxx▂▂
▂▂▂▂▂?x???▂???x?▂▂▂▂▂▂▂▂▂??xxxxxxxxxxxx??▂▄▆▄..xx??xxxxxxxx.x.xx???????xxxxx▂▂
▂▂▂▂▂▂??xxxxxxx?▂▂▂▂▂▂▂▂??xxxxxxxxxxxxxxxxxxxxxxx????xxx?xxxxxx?▄▄▄▄??????x?▂▂
▂▂▂▂▂▂▂??xxxxxx?▂▂▂▂▂▂▂???xxxxxxxxxxxxxxxxxxxxxxxxxxxx????xxxxxx▆▆?▂▄..?▄▂?▂?▂
▂▂▂▂▂▂▂▂▂?xxx.x?▂▂▂▄▄▂▂??xxxxxxxxxxxxxxxxxxxxx....xxxxxxxxxxxxxx???????▂???▂▂▂
▂▂▂▂▂▂▂▂▂▂▂▂▂??▂▂▄▄▄▄▂▂?xx???xxxxxxxx....xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx???▂▄▆▆
▂▂▂▂▂▂▂▂▄▆██▆▂▂▂▄▄▄▄▄▂?????xxxxxx..............xxxxxx?xxxxxxxxxxxxxxxxxxx?▆███
▂▂▂▂▂▆███████▄▄▄▄▄▄▄▄???xxxxxxxxx.............xx??????????xxxxxx?xxxxxxxx?▆███
▂▂▂██████████▆▄▄▄▄▄▄▂??xxxxxxxxx..............x???xxxxxxxxxxxxxx?xxxxxxxx▂▆███
▂▆████████████▆▄▄▄▄▄▂?xxxxxxxxxxxxxxx.........xxxxxxxxxxxxxxxxxxx?x..xxxx▂▆███
██████████████▆▆▄▄▄▂▂?xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx?xxx..xxxxx...xxx▂▆███
██████████████▆▆▄▄▄▂▂?xxxxxxx.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx?▆████
██████████████▆▄▄▄▄▂▂?xxxxxxx.xxxxx?▂xx?xxxxxxxxxxxxxxxxxxxx???xxxxxxxx▂▆█████
██████████████▆▄▄▄▄▂▂??xxxxxxxxxxxxx??▂???xxxxxxxxxxxxxxxxxx???xxxxxx?▆███████
██▆▆██████████▆▄▄▄▄▂▂▂??xxxxxxxxxxxx???xx?xxxxxxx..xxx????▂▂??xxx..x?▆████████
██▆▆██████████▆▄▄▄▄▄▄▂▂????xxxxxxxxx????x..xxxxx.xxxxxxx?▂▄▂?xx...x▂▆█████████
██████████████▆▄▄▄▄▄▄▄▂▂????xxxxxxxxx??????.... ..xxxxx▄▆▂??xx..x?▆███████████
█████████████▆▄▄▄▂▂▂▄▄▄▂▂▂??xxxxxxxxxxxx????????xxxx??▂▂?▂?xxx.x▄█████████████
█████████████▆▄▄▄▂▂▂▂▂▄▄▂▂?▂?xxxxxxxxxxxxxxxxxx???????????xxxx▂███████████████
█████████████▄▄▄▂▂▂▂??▂▂▄▂▂▂?xxxxxxxxxxxxxxxxxxxxxxxxxx??xxxx▄████████████████
███████████▆▆▄▄▂▂▂▂?????▂▄▄▄▂▂?xxxxxxxxxxxxxxxxxxxxxx???xxxx▄█████████████████
████████▆▆▄▄▄▄▄▂▂▂▂▂???????▄▄▂▂?xxxxxxxxxxxxxxxxxxxxx???xx?▂▆█████████████████
████▆▄▄▄▄▄▄▄▄▄▂▂▂▂▂▂???xxxx??▂▄▂??xxxxxxxxxxxxxxxxx????????▂▆█████████████████
██▆▄▄▄▄▄▄▄▄▄▂▂▂▂???????xxxxxxx??▂▂??xxxxxxxxxxxxxxxxx??????▄▆█████████████████
██▆▄▄▂▂▂▂▂▂▂▂▂▂????????xxxxxxxxxxx?▂??xxxxxxxxxxxxxxx??xx?▂▆██████████████████
██▆▄▂▂▂▂▂▂▂????????????xxxxxxxxxxxxxxx?????xxxxxxxx?xxxx?▄▆███████████████████
███▄▂▂▂▂▂▂?????????????xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx??▄▆█████████████████████
████▄▂▂▂?????????x??????xxxxxxxxxxxxxxxxx..xxxxxxxx?▄▆▆███████████████████████
█████▆▄▂▂????????xx??????xxxxxxxxxx.xxxx...xxxxx?▄▆▆██████████████████████████
████████▆▄▂▂??????????????xxxxxxxxxxxxxxxxxx?▂▆▆▆█████████████████████████████
███████████▆▄▄▂▂▂??????????xxxxxxxxxxx??▂▄▆███████████████████████████████████
████████████████▆▆▆▄▄▄▂▂▂▂??????▂▂▄▄▆█████████████████████████████████████████


CREDITS AND INSPIRATION

  kubrick/2001
  antirez/kilo
  ertdfgcvb/play.core

BUILD

  To build, just run

    make

  and that's it.

INSTALL

  You can just install this by running

    brew install danielfalbo/formulae/picturephone

  assuming you already have https://brew.sh.

USAGE

  To get started, you can see yourself in the mirror by running

    picturephone --mode mirror

  which will activate the default webcam of your laptop and render your
  text-based video feedback in your terminal. You can also

    picturephone --help

  to get help, or

    picturephone

  without any arguments to launch a comfortable TUI.

  LOCALHOST EXAMPLE

    Alice hosts the server using real webcam:

      picturephone --role server --port 3000

    Bob connects to localhost using a dummy camera

      picturephone --role client --ip 127.0.0.1 --port 3000 \
                    --camera dummy-bounce

    to avoid fighting for the webcam lock.

  LOCAL TUNNEL EXAMPLE

    Alice hosts the server locally:

      picturephone --role server --port 3000

    Alice exposes her port 3000 via ngrok TCP (requires an ngrok account):

      ngrok tcp 3000

    Ngrok will display a forwarding address like "tcp://0.tcp.ngrok.io:12345".

    Bob connects to that address

      picturephone --role client \
                    --ip $(dig +short 0.tcp.ngrok.io  | head -n 1) \
                    --port 12345 \
                    --camera dummy-gradient

    and now they're communicating over the internet!

  SSH EXAMPLE

    TODO...

COMMUNICATION PROTOCOL

  TODO...

TODOs

  - Draw a box around the picture-in-picture.

  - Ask [accept | reject] before letting your friend(s) in the call.

  - Support multiple people in the same room

  - Implement encryption of the data transmitted.
        Nothing standard, our own implementation.

  - INCREMENTAL VIDEO STREAMING CODEC OPTIMIZATION:
    Consider optimizing the data transmission protocol to be incremental
    so it uses less network data, and then is encoded/decoded on clients.
    Instead of sending the entirety of every frame with redundant data
    from the previous frame, just send what changed. Similarly, the terminal
    should only update the changed cells, not the entire picture.

  - Support linux and bsd webcam interfaces.
